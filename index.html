<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Search</title>
</head>

<body>
    <style>
        textarea {
            border-style: none;
            border-color: Transparent;
            overflow: auto;
            outline: none;
            resize: none;
            margin-top: 10px;
        }
    </style>
    <h1>Search</h1>
    <div>
        <label for="searchTerm">Search Term :</label>
        <input type="text" id="searchTerm" name="searchTerm">
        <label for="count">Count :</label>
        <input type="number" id="count" name="count" value="">
        <button id="searchButton">Search</button>
    </div>
    <textarea id="results" cols="250" rows="50" readonly></textarea>
    <script>
        const searchButton = document.getElementById('searchButton');
        const searchTerm = document.getElementById('searchTerm');
        const count = document.getElementById('count');
        const results = document.getElementById('results');

        searchButton.addEventListener('click', async () => {
            if(count.value == 0 || count.value == null){
                count.value = 10
            } 
            const url = `http://localhost:3001/search?key=key&s=${searchTerm.value}&count=${count.value}`;

            try {
                results.innerHTML = "Fetching search results..."
                let data = await fetch(url)
                let jsonData = await data.json();

                results.innerHTML = JSON.stringify(jsonData, null, 4)
            } catch {
                results.innerHTML = "Search failed"
            }
        });
    </script>
</body>

</html>